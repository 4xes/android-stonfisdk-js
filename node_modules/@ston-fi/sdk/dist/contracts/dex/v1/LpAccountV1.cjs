"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const y=require("tonweb"),A=require("../../../StonApiClient.cjs"),c=require("../../../utils/parseAddress.cjs"),o=require("../constants.cjs"),{utils:{BN:n},boc:{Cell:u},Contract:g,Address:d}=y,r=class w extends g{constructor({tonApiClient:t,stonApiClient:e,gasConstants:s,...i}){super(t,i),this.stonApiClient=e??new A.StonApiClient(t),this.gasConstants={...w.gasConstants,...s}}async createRefundBody(t){const e=new u;return e.bits.writeUint(o.DEX_OP_CODES.REFUND,32),e.bits.writeUint((t==null?void 0:t.queryId)??0,64),e}async buildRefundTxParams(t){const e=await this.getAddress(),s=await this.createRefundBody({queryId:t==null?void 0:t.queryId}),i=new n((t==null?void 0:t.gasAmount)??this.gasConstants.refund);return{to:new d(e.toString(!0,!0,!0)),payload:s,gasAmount:i}}async createDirectAddLiquidityBody(t){const e=new u;return e.bits.writeUint(o.DEX_OP_CODES.DIRECT_ADD_LIQUIDITY,32),e.bits.writeUint(t.queryId??0,64),e.bits.writeCoins(new n(t.amount0)),e.bits.writeCoins(new n(t.amount1)),e.bits.writeCoins(new n(t.minimumLpToMint??1)),e}async buildDirectAddLiquidityTxParams(t){const e=await this.getAddress(),s=await this.createDirectAddLiquidityBody({amount0:t.amount0,amount1:t.amount1,minimumLpToMint:t.minimumLpToMint,queryId:t.queryId}),i=new n(t.gasAmount??this.gasConstants.directAddLp);return{to:new d(e.toString(!0,!0,!0)),payload:s,gasAmount:i}}async createResetGasBody(t){const e=new u;return e.bits.writeUint(o.DEX_OP_CODES.RESET_GAS,32),e.bits.writeUint((t==null?void 0:t.queryId)??0,64),e}async buildResetGasTxParams(t){const e=await this.getAddress(),s=await this.createResetGasBody({queryId:t==null?void 0:t.queryId}),i=new n((t==null?void 0:t.gasAmount)??this.gasConstants.resetGas);return{to:new d(e.toString(!0,!0,!0)),payload:s,gasAmount:i}}async getData(){const t=await this.getAddress(),e=await this.provider.call2(t.toString(),"get_lp_account_data");return{userAddress:c.parseAddressNotNull(e[0]),poolAddress:c.parseAddressNotNull(e[1]),amount0:e[2],amount1:e[3]}}};r.version=o.DEX_VERSION.v1;r.gasConstants={refund:new n("300000000"),directAddLp:new n("300000000"),resetGas:new n("300000000")};let l=r;exports.LpAccountV1=l;
//# sourceMappingURL=LpAccountV1.cjs.map
